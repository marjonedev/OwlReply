<!--<h2>Submit your password for us to check your emails.</h2>
<%#= form_with(model: @emailaccount, html:{class: 'nobottommargin'}, local: true) do |form| %>
  <%# if @emailaccount.errors.any? %>
    <div class="style-msg2 errormsg">
      <div class="msgtitle">Oops! There's an error upon submitting.</div>
      <div class="sb-msg">
        <ul>
          <%# for message in @emailaccount.errors.full_messages %>
            <li><%#= message %></li>
          <%# end %>
        </ul>
      </div>
    </div>
  <%# end %>
  <div class="col_full">
    <%#= form.label :address %>
    <%#= form.text_field :address, class: 'form-control required', id: 'address', required: 'required' %>
  </div>
  <div class="col_full">
    <%#= form.label :password %>
    <%#= form.text_field :password, class: 'form-control required', id: 'address', required: 'required' %>
  </div>
  <div class="actions col_full nobottommargin">
    <%#= form.submit @emailaccount.new_record? ? 'Add New' : 'Save', :class => 'button button-3d button-black nomargin' %>
  </div>
<%# end %>-->

<div class="card">
  <div class="card-body">
    <% if emailaccount.errors.any? %>
      <div class="style-msg2 errormsg">
        <div class="msgtitle">Oops! There's an error upon submitting.</div>
        <div class="sb-msg">
          <ul>
            <% for message in emailaccount.errors.full_messages %>
              <li><%= message %></li>
            <% end %>
          </ul>
        </div>
      </div>
    <% end %>
    <%= form_with model: (emailaccount || emailaccount = Emailaccount.new), html:{class: 'nobottommargin'} do |f| %>
      <div class="form-group">
        <label>Email Address</label>
        <%= f.text_field :address, class: 'form-control required', required: 'required' %>
      </div>
      <div class="form-group">
        <label>Password</label>
        <%= f.text_field :password, class: 'form-control', required: 'required' %>
      </div>
      <div class="form-group">
        <label>Encrypted Password</label>
        <%= f.text_field :encrypted_password, class: 'form-control' %>
      </div>
      <div class="form-group">
        <label>Encryption Key</label>
        <%= f.text_field :encryption_key, class: 'form-control' %>
      </div>
      <div class="form-group">
        <label>Email Template</label>
        <%= f.text_area :template, class: 'form-control' %>
        <small class="form-text text-muted">
          use  <strong>%%reply%%</strong>  short tag to insert the content of the reply
        </small>
      </div>

      <div class="card-footer noleftpadding norightpadding nobottompadding bg-white">
        <%= f.submit 'Save', :class => 'button nomargin' %>
        <%= link_to 'Cancel', emailaccount_url(emailaccount), class: 'button-cancel button button-white button-light' %>
        <% unless is_main_account(emailaccount) %>
          <%= link_to 'Remove', remove_emailaccount_path(emailaccount), class: 'button-remove button button-red float-right', method: :delete, remote: true %>
        <% end %>
      </div>

      <% if emailaccount.authenticated %>
      <div class="pt-lg-4"><small>Your account have been authenticated.</small> <%= link_to 'Revoke Access', revoke_account_access_emailaccount_path(emailaccount), onclick: "return confirm('Are you sure to revoke access?')", class: "button button-3d button-mini button-rounded button-leaf" %></div>
      <% end %>
    <% end %>
  </div>
</div>

