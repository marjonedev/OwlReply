
<script>

    $readMoreJS.init({
        target: '.email_content .email_body',
        numOfWords: 170,
        toggle: true,
        moreLink: 'Read More...',
        lessLink: 'Read Less'
    });

  var selected_keywords = [];
  var removed_keywords = [];
  function select_keyword(elem, word) {
      var modal = $(elem).closest('.modal');
      var is_modal = $(elem).hasClass('.modal');
      if(is_modal){
          modal = $(elem);
      }

      if (selected_keywords.indexOf(word) >= 0) {
          i = selected_keywords.indexOf(word);
          modal.find('.suggested_' + word).removeClass('selected');
          $(modal).find('input[name="reply[keywords]"]').tagsinput('remove', word);
          selected_keywords.splice(i, 1);
      } else {
          if (is_modal) {
              modal.find('.suggested_' + word).addClass('selected');
          } else {
              $(elem).addClass('selected');
          }

          modal.find(".reply_box .bootstrap-tagsinput input").val(word);
          modal.find(".reply_box .bootstrap-tagsinput input").keypress();


          var rk = removed_keywords.indexOf(word);
          removed_keywords.splice(rk, 1);
          selected_keywords.push(word);
      }
  }
</script>